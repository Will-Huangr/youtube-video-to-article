app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: youtubeæ–‡ç« ç”Ÿæˆ
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.6@dd589dc093c8084925858034ab5ec1fdf0d33819f43226c2f8c4a749a9acbbb2
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: 1752132727721-source-1752143602102-target
      selected: false
      source: '1752132727721'
      sourceHandle: source
      target: '1752143602102'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1752143602102-source-1752202558396-target
      selected: false
      source: '1752143602102'
      sourceHandle: source
      target: '1752202558396'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: template-transform
      id: 1752202558396-source-1752209765464-target
      source: '1752202558396'
      sourceHandle: source
      target: '1752209765464'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: template-transform
        targetType: llm
      id: 1752209765464-source-1752209794058-target
      source: '1752209765464'
      sourceHandle: source
      target: '1752209794058'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: end
      id: 1752209794058-source-1752134638647-target
      source: '1752209794058'
      sourceHandle: source
      target: '1752134638647'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: start
        targetType: llm
      id: 1752130841648-source-1752132727721-target
      source: '1752130841648'
      sourceHandle: source
      target: '1752132727721'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: å­—å¹•æ–‡æœ¬
          max_length: 10000000
          options: []
          required: true
          type: paragraph
          variable: text
        - label: language
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: language
        - label: secret_key
          max_length: 200
          options: []
          required: true
          type: text-input
          variable: secret_key
        - label: access_key
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: access_key
        - label: å›¾ç‰‡é£æ ¼
          max_length: 2000
          options: []
          required: false
          type: paragraph
          variable: picturestyle
      height: 194
      id: '1752130841648'
      position:
        x: 31.961403266738444
        y: 284
      positionAbsolute:
        x: 31.961403266738444
        y: 284
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 7780afb4-94a3-4220-8c07-8fe514fe8df0
          role: system
          text: '## è§’è‰²å®šä½


            æ‚¨æ˜¯ä¸€ä½ä¸“ä¸šçš„ç”µå•†å†…å®¹ä¸“å®¶ï¼Œæ“…é•¿å°†åŸå§‹ç´ æè½¬åŒ–ä¸ºé«˜è´¨é‡ã€ç»“æ„åŒ–çš„ä¸“ä¸šæ–‡ç« ï¼Œä¸“ä¸ºç”µå•†å–å®¶æœåŠ¡ã€‚


            ## æ ¸å¿ƒä»»åŠ¡


            åŸºäºç”¨æˆ·æä¾›çš„åŸå§‹å†…å®¹æ–‡æœ¬ï¼Œåˆ›ä½œä¸€ç¯‡é’ˆå¯¹ç”µå•†å–å®¶çš„æ·±åº¦ä¸“ä¸šæ–‡ç« ï¼Œè¦æ±‚å†…å®¹å‡†ç¡®ã€ç»“æ„æ¸…æ™°ã€å…·å¤‡æ·±åº¦æ´å¯Ÿå’Œé«˜åº¦å®ç”¨æ€§ã€‚


            ## å†…å®¹å¤„ç†åŸåˆ™


            ### å¿ å®æ”¹å†™ä¸é€‚é…æ€§

            ä¸¥æ ¼åŸºäºåŸå§‹å†…å®¹ï¼šå®Œå…¨ä¾æ®æä¾›çš„åŸå§‹ç´ æè¿›è¡Œé‡ç»„å’Œä¼˜åŒ–ã€‚

            ä¿¡æ¯å®Œæ•´æ€§ï¼šä¸æ·»åŠ åŸå§‹å†…å®¹ä¸­ä¸å­˜åœ¨çš„ä¿¡æ¯ã€æ¡ˆä¾‹æˆ–æ•°æ®ã€‚

            è§‚ç‚¹å‡†ç¡®æ€§ï¼šä¸å¤¸å¤§ã€ä¸ä¿®é¥°åŸå§‹å†…å®¹çš„æ ¸å¿ƒè§‚ç‚¹ã€‚

            æ•°æ®ç²¾ç¡®æ€§ï¼šä¿æŒæ‰€æœ‰æ•°å­—ã€æ¯”ä¾‹ã€æ—¶é—´ç­‰æ•°æ®çš„å‡†ç¡®æ€§ã€‚

            è‹¥åŸå§‹å†…å®¹è¿‡çŸ­æˆ–ç©ºç¼ºï¼Œåˆ™æ— éœ€å¼ºè¡Œæ‰©å†™ã€‚

            ### ä¸“ä¸šè½¬åŒ–

            è¯­è¨€é£æ ¼ï¼šå°†å£è¯­åŒ–ã€éšæ„çš„è¡¨è¾¾è½¬åŒ–ä¸ºä¸“ä¸šä¹¦é¢è¯­ã€‚

            å†…å®¹ç²¾ç‚¼ï¼šå»é™¤è¯­æ°”è¯ã€é‡å¤å†…å®¹å’Œæ— å…³çš„è¿‡æ¸¡æ€§è¯­å¥ã€‚

            é€»è¾‘ä¼˜åŒ–ï¼šæŒ‰ç…§é€»è¾‘å…³ç³»é‡æ–°ç»„ç»‡é›¶æ•£å†…å®¹ï¼Œåˆå¹¶ç›¸ä¼¼è§‚ç‚¹ã€‚


            ## æ–‡ç« æ’°å†™è¦æ±‚


            ### ç»“æ„ç»„ç»‡

            é€»è¾‘é‡ç»„ï¼šå°†é›¶æ•£ä¿¡æ¯æŒ‰ä¸»é¢˜å’Œé‡è¦æ€§é‡æ–°æ’åˆ—ã€‚

            å†…å®¹åˆå¹¶ï¼šæ•´åˆç›¸ä¼¼è§‚ç‚¹ï¼Œé¿å…é‡å¤è¡¨è¾¾ã€‚

            å±‚æ¬¡æ¸…æ™°ï¼šå»ºç«‹æ¸…æ™°çš„ä¿¡æ¯å±‚çº§ç»“æ„ã€‚

            ### å®ç”¨æŠ€å·§

            ä»…å½“åŸå§‹å†…å®¹åŒ…å«æ˜ç¡®æ“ä½œæ–¹æ³•æ—¶ï¼Œæç‚¼ç”Ÿæˆ**â€œå®ç”¨æŠ€å·§â€æ¿å—**ï¼Œæ‰€æœ‰æŠ€å·§æè¿°å¿…é¡»åŸºäºåŸå§‹å†…å®¹ï¼Œå¹¶æä¾›å…·ä½“çš„å®æ–½è¦ç‚¹å’Œæ³¨æ„äº‹é¡¹ã€‚

            ### ä»·å€¼ä½“ç°

            å¼ºè°ƒå†…å®¹å¯¹ç”µå•†å–å®¶çš„å®é™…åº”ç”¨ä»·å€¼ã€‚

            æ˜ç¡®æ¯ä¸ªè§‚ç‚¹åœ¨ç”µå•†é¢†åŸŸçš„åº”ç”¨åœºæ™¯å’Œé€‚ç”¨æ¡ä»¶ã€‚

            æä¾›æ¸…æ™°çš„å¯æ“ä½œæ€§è¡ŒåŠ¨æŒ‡å—å’Œå®æ–½æ­¥éª¤ã€‚


            ## è¾“å‡ºæ ¼å¼è¦æ±‚


            ### å†…å®¹ç»“æ„

            æ ‡é¢˜ï¼šåŒ…å«SEOå…³é”®è¯çš„å¼•äººå…¥èƒœæ ‡é¢˜ã€‚

            ç¯‡å¹…ï¼š500-3000å­—çš„æ·±åº¦å†…å®¹ï¼ˆæ ¹æ®åŸå§‹å†…å®¹ä¸°å¯Œåº¦è°ƒæ•´ï¼‰ã€‚

            æ®µè½ï¼šæ®µè½é€»è¾‘æ¸…æ™°ã€‚

            ç»“æ„ï¼šå¯ä»¥å‚è€ƒç±»ä¼¼â€œå¼•è¨€-ä¸»ä½“-å®ç”¨å»ºè®®-æ€»ç»“â€ç»“æ„ã€‚

            ### è§†è§‰å‘ˆç°è§„èŒƒ

            æ•°æ®å±•ç¤ºï¼šä½¿ç”¨ <table> å±•ç¤ºå¯¹æ¯”æ•°æ®å’Œå…³é”®æŒ‡æ ‡ã€‚

            è¦ç‚¹åˆ—ä¸¾ï¼šç”¨ <ul> æˆ– <ol> åˆ—å‡ºå…³é”®è¦ç‚¹å’Œæ­¥éª¤ã€‚

            é‡ç‚¹å¼ºè°ƒï¼šç”¨ <blockquote> çªå‡ºæ ¸å¿ƒè§‚ç‚¹å’Œé‡è¦æé†’ã€‚

            ### æ’ç‰ˆä¼˜åŒ–ï¼š ç¡®ä¿è§†è§‰å…ƒç´ åˆç†åˆ†å¸ƒï¼Œæå‡é˜…è¯»æ•ˆç‡å’Œä½“éªŒã€‚

            ### è´¨é‡æ ‡å‡†

            ä¸“ä¸šæ€§ï¼šä½¿ç”¨ç”µå•†è¡Œä¸šæœ¯è¯­å’Œä¸“ä¸šè¡¨è¾¾ã€‚

            å®ç”¨æ€§ï¼šæä¾›å¯ç›´æ¥åº”ç”¨çš„æ–¹æ³•å’Œå»ºè®®ã€‚

            å¯è¯»æ€§ï¼šç»“æ„æ¸…æ™°ï¼Œå±‚æ¬¡åˆ†æ˜ï¼Œä¾¿äºå¿«é€Ÿé˜…è¯»å’Œç†è§£ã€‚


            ## æ‰§è¡ŒæŒ‡ä»¤


            è¯·æŒ‰ç…§ä»¥ä¸Šè¦æ±‚å¤„ç†ç”¨æˆ·æä¾›çš„åŸå§‹å†…å®¹ï¼Œè¾“å‡ºä¸€ç¯‡ç¬¦åˆç”µå•†å–å®¶éœ€æ±‚çš„ä¸“ä¸šæ–‡ç« ã€‚è¾“å‡ºçš„æ–‡ç« ä»¥{{#1752130841648.language#}}è¯­ç§è¾“å‡ºã€‚

            æ³¨æ„ï¼šä¸¥æ ¼éµå¾ª"å¿ å®æ”¹å†™"åŸåˆ™ï¼Œç¡®ä¿æ‰€æœ‰å†…å®¹éƒ½æœ‰åŸå§‹ç´ ææ”¯æ’‘ï¼Œä¸è¿›è¡Œä»»ä½•æ— æ ¹æ®çš„æ‰©å±•æˆ–ä¿®é¥°ã€‚'
        - id: 73d8625d-0ab5-4125-bd63-67d5672a01a7
          role: user
          text: '<text>

            {{#1752130841648.text#}}

            </text>'
        selected: false
        title: æ–‡ç« æ”¹å†™
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1752132727721'
      position:
        x: 638
        y: 284
      positionAbsolute:
        x: 638
        y: 284
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1752209794058'
          - text
          value_type: string
          variable: text
        selected: false
        title: å¸¦å›¾ç‰‡çš„æ–‡ç« 
        type: end
      height: 90
      id: '1752134638647'
      position:
        x: 2158
        y: 284
      positionAbsolute:
        x: 2158
        y: 284
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 6463d62f-efe2-4b61-983d-90843d44e7cb
          role: system
          text: '## ä»»åŠ¡

            ä»»åŠ¡1:æå–æ–‡ç« æ ¸å¿ƒä¸»é¢˜æˆ–åœºæ™¯ï¼Œç»“åˆç”¨æˆ·è¦æ±‚çš„picture styleæ•´åˆï¼Œæœ€å¤šæå–3ä¸ªåœºæ™¯ç”¨äºè°ƒç”¨å³æ¢¦ç”Ÿæˆå›¾ã€‚åœºæ™¯çš„æè¿°éœ€è¦è·ŸåŸæ–‡å¥‘åˆï¼Œæè¿°çš„å†…å®¹ä¾¿äºå³æ¢¦ç†è§£ç”Ÿæˆå›¾ç‰‡ã€‚

            ä»»åŠ¡2:ç»“åˆæå–çš„åœºæ™¯å’Œæ–‡ç« å†…å®¹ç”Ÿæˆè°ƒç”¨å³æ¢¦AIçš„æç¤ºè¯ã€‚æç¤ºè¯çš„æè¿° ä½¿ç”¨ä¸“ä¸šçš„çŸ­è¯è¯­å½¢å®¹é£æ ¼ã€é•œå¤´è¯­è¨€ç­‰ç¾å­¦æè¿°ï¼›ä½¿ç”¨è‡ªç„¶è¯­è¨€å®Œæ•´è¿è´¯çš„æè¿°ä½ ç”»é¢çš„ä¸»ä½“æè¿°(ä¸»ä½“+è¡Œä¸º+ç¯å¢ƒ)ï¼›å½“è¾“å…¥çš„æç¤ºè¯è¾ƒå¤šæ—¶ï¼Œå¯ä»¥æŠŠè¦é‡ç‚¹çªå‡ºçš„å†…å®¹æ”¾ç½®åœ¨æœ€å‰é¢ã€‚

            ## è¾“å‡º

            è¾“å‡ºç”Ÿæˆçš„æç¤ºè¯ï¼Œå¹¶è¯´æ˜æœ€å¤šç”Ÿæˆ3å¼ å›¾ã€‚ç”Ÿæˆå›¾ç‰‡æ—¶æ’å…¥ç½‘é¡µæ–‡ç« ä¸­çš„ã€‚å°ºå¯¸éœ€è¦é€‚ä¸­ã€‚

            '
        - id: 084be711-3937-4a87-80a5-baf766e59c98
          role: user
          text: 'ç”¨æˆ·è¦æ±‚çš„picture styleï¼š{{#1752130841648.picturestyle#}}

            æ–‡ç« ï¼š{{#1752132727721.text#}}'
        selected: false
        title: ç”Ÿæˆå³æ¢¦æç¤ºè¯
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1752143602102'
      position:
        x: 942
        y: 284
      positionAbsolute:
        x: 942
        y: 284
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport datetime\nimport hashlib\nimport hmac\nimport urllib.request\n\
          import urllib.parse\nimport urllib.error\nimport ssl\n\n\ndef sign(key,\
          \ msg):\n    return hmac.new(key, msg.encode('utf-8'), hashlib.sha256).digest()\n\
          \n\ndef getSignatureKey(key, dateStamp, regionName, serviceName):\n    kDate\
          \ = sign(key.encode('utf-8'), dateStamp)\n    kRegion = sign(kDate, regionName)\n\
          \    kService = sign(kRegion, serviceName)\n    kSigning = sign(kService,\
          \ 'request')\n    return kSigning\n\n\ndef formatQuery(parameters):\n  \
          \  return '&'.join(f\"{k}={v}\" for k, v in sorted(parameters.items()))\n\
          \n\ndef signV4Request(access_key, secret_key, service, req_query, req_body):\n\
          \    method = 'POST'\n    host = 'visual.volcengineapi.com'\n    region\
          \ = 'cn-north-1'\n    endpoint = 'https://visual.volcengineapi.com'\n  \
          \  \n    if not access_key or not secret_key:\n        raise ValueError('access_key\
          \ å’Œ secret_key ä¸èƒ½ä¸ºç©º')\n\n    t = datetime.datetime.utcnow()\n    current_date\
          \ = t.strftime('%Y%m%dT%H%M%SZ')\n    datestamp = t.strftime('%Y%m%d')\n\
          \    canonical_uri = '/'\n    canonical_querystring = req_query\n    signed_headers\
          \ = 'content-type;host;x-content-sha256;x-date'\n    payload_hash = hashlib.sha256(req_body.encode('utf-8')).hexdigest()\n\
          \    content_type = 'application/json'\n    \n    canonical_headers = (\n\
          \        f'content-type:{content_type}\\n'\n        f'host:{host}\\n'\n\
          \        f'x-content-sha256:{payload_hash}\\n'\n        f'x-date:{current_date}\\\
          n'\n    )\n    \n    canonical_request = (\n        f'{method}\\n{canonical_uri}\\\
          n{canonical_querystring}\\n'\n        f'{canonical_headers}\\n{signed_headers}\\\
          n{payload_hash}'\n    )\n    \n    algorithm = 'HMAC-SHA256'\n    credential_scope\
          \ = f'{datestamp}/{region}/{service}/request'\n    string_to_sign = (\n\
          \        f'{algorithm}\\n{current_date}\\n{credential_scope}\\n'\n     \
          \   f'{hashlib.sha256(canonical_request.encode(\"utf-8\")).hexdigest()}'\n\
          \    )\n    \n    signing_key = getSignatureKey(secret_key, datestamp, region,\
          \ service)\n    signature = hmac.new(signing_key, string_to_sign.encode('utf-8'),\
          \ hashlib.sha256).hexdigest()\n\n    authorization_header = (\n        f'{algorithm}\
          \ Credential={access_key}/{credential_scope}, '\n        f'SignedHeaders={signed_headers},\
          \ Signature={signature}'\n    )\n    \n    headers = {\n        'X-Date':\
          \ current_date,\n        'Authorization': authorization_header,\n      \
          \  'X-Content-Sha256': payload_hash,\n        'Content-Type': content_type\n\
          \    }\n\n    request_url = f'{endpoint}?{canonical_querystring}'\n    \n\
          \    try:\n        ssl_context = ssl.create_default_context()\n        ssl_context.check_hostname\
          \ = False\n        ssl_context.verify_mode = ssl.CERT_NONE\n        \n \
          \       req = urllib.request.Request(request_url, data=req_body.encode('utf-8'),\
          \ headers=headers, method='POST')\n        with urllib.request.urlopen(req,\
          \ context=ssl_context) as response:\n            response_data = response.read().decode('utf-8')\n\
          \            status_code = response.getcode()\n            \n        resp_str\
          \ = response_data.replace(\"\\\\u0026\", \"&\")\n        \n        return\
          \ {\n            'status_code': status_code,\n            'response_body':\
          \ resp_str,\n            'request_url': request_url\n        }\n       \
          \ \n    except urllib.error.URLError as err:\n        raise Exception(f'è¯·æ±‚å‘ç”Ÿé”™è¯¯:\
          \ {err}')\n\n\ndef extract_image_data(response_data):\n    \"\"\"æ ¹æ®å®é™…è¿”å›å­—æ®µæå–å›¾ç‰‡æ•°æ®\"\
          \"\"\n    try:\n        # 1. ä¼˜å…ˆæ£€æŸ¥ image_urls (æœ€å¯èƒ½æ˜¯å›¾ç‰‡URLæ•°ç»„)\n        if 'image_urls'\
          \ in response_data and response_data['image_urls']:\n            image_urls\
          \ = response_data['image_urls']\n            if isinstance(image_urls, list)\
          \ and image_urls:\n                return image_urls[0]\n            elif\
          \ isinstance(image_urls, str):\n                return image_urls\n    \
          \    \n        # 2. æ£€æŸ¥ binary_data_base64 (base64å›¾ç‰‡æ•°æ®)\n        if 'binary_data_base64'\
          \ in response_data and response_data['binary_data_base64']:\n          \
          \  binary_data = response_data['binary_data_base64']\n            if isinstance(binary_data,\
          \ list) and binary_data:\n                return binary_data[0]\n      \
          \      elif isinstance(binary_data, str):\n                return binary_data\n\
          \        \n        # 3. æ£€æŸ¥ data å­—æ®µé‡Œçš„å†…å®¹\n        if 'data' in response_data\
          \ and response_data['data']:\n            data = response_data['data']\n\
          \            if isinstance(data, dict):\n                # æ£€æŸ¥ data é‡Œçš„ image_urls\n\
          \                if 'image_urls' in data and data['image_urls']:\n     \
          \               image_urls = data['image_urls']\n                    if\
          \ isinstance(image_urls, list) and image_urls:\n                       \
          \ return image_urls[0]\n                    elif isinstance(image_urls,\
          \ str):\n                        return image_urls\n                \n \
          \               # æ£€æŸ¥ data é‡Œçš„ binary_data_base64\n                if 'binary_data_base64'\
          \ in data and data['binary_data_base64']:\n                    binary_data\
          \ = data['binary_data_base64']\n                    if isinstance(binary_data,\
          \ list) and binary_data:\n                        return binary_data[0]\n\
          \                    elif isinstance(binary_data, str):\n              \
          \          return binary_data\n                \n                # æ£€æŸ¥ data\
          \ é‡Œçš„å…¶ä»–å¯èƒ½å­—æ®µ\n                for key in ['image_url', 'url', 'image', 'img_url']:\n\
          \                    if key in data and data[key]:\n                   \
          \     return data[key]\n        \n        # 4. æ£€æŸ¥å…¶ä»–é¡¶å±‚å­—æ®µ\n        for key\
          \ in ['image_url', 'url', 'image', 'img_url']:\n            if key in response_data\
          \ and response_data[key]:\n                return response_data[key]\n \
          \               \n    except Exception:\n        pass\n    \n    return\
          \ \"\"\n\n\ndef main(access_key: str, secret_key: str, prompt: str) -> dict:\n\
          \    \"\"\"è°ƒç”¨ç«å±±å¼•æ“è§†è§‰APIç”Ÿæˆå›¾ç‰‡\"\"\"\n    service = 'cv'\n    \n    query_params\
          \ = {\n        'Action': 'CVProcess',\n        'Version': '2022-08-31',\n\
          \    }\n    formatted_query = formatQuery(query_params)\n\n    body_params\
          \ = {\n        \"req_key\": \"jimeng_high_aes_general_v21_L\",\n       \
          \ \"prompt\": prompt,\n        \"model_version\": \"general_v2.1_L\",\n\
          \        \"return_url\": True,\n        \"logo_info\": {\n            \"\
          add_logo\": False,\n            \"position\": 0,\n            \"language\"\
          : 0,\n            \"opacity\": 0.3\n        },\n        \"use_sr\": False,\n\
          \        \"sr_seed\": -1,\n        \"width\": 1024,\n        \"height\"\
          : 1024,\n        \"scale\": 7.5,\n        \"ddim_steps\": 20,\n        \"\
          seed\": -1,\n        \"binary_data_base64\": []\n    }\n    formatted_body\
          \ = json.dumps(body_params)\n    \n    try:\n        result = signV4Request(access_key,\
          \ secret_key, service, formatted_query, formatted_body)\n        response_data\
          \ = json.loads(result['response_body'])\n        \n        # æå–å›¾ç‰‡æ•°æ®\n  \
          \      image_data = extract_image_data(response_data)\n        \n      \
          \  # åˆ¤æ–­æ˜¯å¦æˆåŠŸ\n        success = bool(image_data) and result['status_code']\
          \ == 200\n        \n        return {\n            \"result\": [\n      \
          \          {\n                    \"image_url\": image_data,\n         \
          \           \"success\": success,\n                    \"status_code\":\
          \ result['status_code'],\n                    \"message\": \"å›¾ç‰‡ç”ŸæˆæˆåŠŸ\" if\
          \ success else \"æœªæ‰¾åˆ°å›¾ç‰‡æ•°æ®\"\n                }\n            ]\n        }\n\
          \        \n    except Exception as e:\n        return {\n            \"\
          result\": [\n                {\n                    \"image_url\": \"\"\
          ,\n                    \"success\": False,\n                    \"status_code\"\
          : 0,\n                    \"message\": f\"APIè°ƒç”¨å¤±è´¥: {str(e)}\"\n        \
          \        }\n            ]\n        }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: array[object]
        selected: false
        title: ä»£ç è¯·æ±‚å³æ¢¦ç”Ÿæˆå›¾ç‰‡
        type: code
        variables:
        - value_selector:
          - '1752130841648'
          - access_key
          value_type: string
          variable: access_key
        - value_selector:
          - '1752130841648'
          - secret_key
          value_type: string
          variable: secret_key
        - value_selector:
          - '1752143602102'
          - text
          value_type: string
          variable: prompt
      height: 54
      id: '1752202558396'
      position:
        x: 1246
        y: 284
      positionAbsolute:
        x: 1246
        y: 284
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: '{{ arg1 }}'
        title: è½¬æˆStringæ”¾ä¾¿æå–ä¿¡æ¯
        type: template-transform
        variables:
        - value_selector:
          - '1752202558396'
          - result
          value_type: array[object]
          variable: arg1
      height: 54
      id: '1752209765464'
      position:
        x: 1550
        y: 284
      positionAbsolute:
        x: 1550
        y: 284
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: 5a6649c0-97e6-409b-a6e9-7722eb878434
          role: system
          text: '## ä»»åŠ¡ï¼šå›¾æ–‡ç»“åˆæ–‡ç« ç”Ÿæˆ


            ## æ ¸å¿ƒç›®æ ‡ï¼š åŸºäºæä¾›çš„æ–‡ç« å†…å®¹å’Œå›¾ç‰‡ URL åˆ—è¡¨ï¼Œç”Ÿæˆä¸€ç¯‡å›¾æ–‡ç»“åˆçš„ä¸“ä¸šæ–‡ç« ã€‚


            ## å…·ä½“æ­¥éª¤ï¼š


            1. å›¾ç‰‡è§£æä¸ç­›é€‰

            - å›¾ç‰‡ç†è§£ä¸æå–ï¼š è¯·æ¥æ”¶å¹¶ç†è§£ç”¨æˆ·æä¾›çš„å¤šå¼ å›¾ç‰‡ URLã€‚

            - å†…å®¹å¥‘åˆåº¦è¯„ä¼°ï¼š ç»“åˆå›¾ç‰‡å†…å®¹ï¼Œè¯„ä¼°å…¶ä¸æ–‡ç« ä¸»é¢˜å’Œæ®µè½çš„å¥‘åˆåº¦ã€‚

            - å¦‚æœå›¾ç‰‡ä¸æ–‡ç« ä¸»é¢˜æˆ–ä¸´è¿‘æ®µè½å†…å®¹é«˜åº¦ä¸ç¬¦æˆ–ç›¸å…³æ€§æä½ï¼Œåˆ™å¯ä»¥é€‰æ‹©å¼ƒç”¨è¯¥å›¾ç‰‡ã€‚

            - å¦‚æœæ‰€æœ‰å›¾ç‰‡å‡ä¸é€‚åˆæ’å…¥æ–‡ç« ï¼Œåˆ™æœ€ç»ˆæ–‡ç« å¯ä»¥ä¸åŒ…å«ä»»ä½•å›¾ç‰‡ï¼Œå¯ç›´æ¥è¾“å‡ºæ–‡ç« ã€‚


            2. å›¾ç‰‡æ•´åˆä¸æ’ç‰ˆè¦æ±‚


            - åœ¨ç”Ÿæˆå›¾æ–‡ç»“åˆæ–‡ç« æ—¶ï¼Œè¯·ä¸¥æ ¼éµå®ˆä»¥ä¸‹å‡†åˆ™ï¼Œä»¥ç¡®ä¿å›¾æ–‡å†…å®¹é«˜åº¦å¥‘åˆä¸”è§†è§‰å‘ˆç°è‰¯å¥½ï¼š

            å›¾ç‰‡æ’å…¥åŸåˆ™ï¼š

            -- å†…å®¹ç›¸å…³æ€§ï¼š æ¯å¼ å›¾ç‰‡æ’å…¥çš„ä½ç½®å¿…é¡»ä¸ç´§é‚»çš„æ®µè½å†…å®¹é«˜åº¦ç›¸å…³ï¼Œå›¾ç‰‡åº”ä½œä¸ºè¯¥æ®µè½çš„è§†è§‰è¡¥å……æˆ–å…·è±¡åŒ–å‘ˆç°ã€‚

            -- é€»è¾‘è¡”æ¥ï¼š å›¾ç‰‡åº”è‡ªç„¶åœ°èå…¥æ–‡ç« å™è¿°æµï¼Œä¸çªå…€ï¼Œä¸æ‰“æ–­è¯»è€…çš„é˜…è¯»ä½“éªŒã€‚

            ä¼˜å…ˆå…³é”®ä¿¡æ¯ï¼š ä¼˜å…ˆä¸ºæ–‡ç« ä¸­çš„æ ¸å¿ƒè§‚ç‚¹ã€å…³é”®æ­¥éª¤æˆ–é‡è¦æ¡ˆä¾‹æ®µè½é€‰æ‹©åˆé€‚çš„å›¾ç‰‡ä½ç½®ã€‚

            -- å›¾ç‰‡æ•°é‡é™åˆ¶ï¼š

            æ•´ç¯‡æ–‡ç« ä¸­æ’å…¥çš„å›¾ç‰‡æ€»æ•°æœ€å¤šä¸º 3 å¼ ã€‚è¯·æ ¹æ®æ–‡ç« é•¿åº¦å’Œå†…å®¹çš„è§†è§‰éœ€æ±‚ï¼Œåˆç†åˆ†é…å›¾ç‰‡æ•°é‡ï¼ˆå¯ä»¥å°‘äº 3 å¼ ï¼‰ã€‚

            -- å›¾ç‰‡å ä½ç¬¦æ ¼å¼ï¼š

            åœ¨æ‚¨è®¤ä¸ºæœ€é€‚åˆæ’å…¥å›¾ç‰‡çš„ä½ç½®ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªæ®µè½ç»“æŸåï¼‰ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ç‰¹å®šçš„å›¾ç‰‡å ä½ç¬¦æ¥æ ‡è®°ï¼Œå¹¶ç¡®ä¿å ä½ç¬¦å†…çš„å›¾ç‰‡æè¿°ä¸å›¾ç‰‡å†…å®¹åŠå‘¨è¾¹æ–‡æœ¬ç›¸ç¬¦ã€‚

            -- æ ¼å¼ï¼š [å›¾ç‰‡URL: {{å›¾ç‰‡å®é™…URL}}; å›¾ç‰‡æè¿°: æ­¤å¤„ç®€è¦æè¿°å›¾ç‰‡å†…å®¹ï¼Œä¸è¶…è¿‡20å­—}]


            ç¤ºä¾‹ï¼š

            â€˜â€™â€˜

            ç”µå•†å–å®¶åœ¨è¿›è¡Œå¸‚åœºåˆ†ææ—¶ï¼Œåº”å……åˆ†åˆ©ç”¨å¤§æ•°æ®å·¥å…·ï¼Œè¯†åˆ«æ½œåœ¨å•†æœºå’Œç”¨æˆ·éœ€æ±‚ã€‚ç²¾å‡†çš„å¸‚åœºæ´å¯Ÿæ˜¯åˆ¶å®šæœ‰æ•ˆè¥é”€ç­–ç•¥çš„åŸºç¡€ã€‚

            [å›¾ç‰‡URL: {{https://example.com/image1.jpg}}; å›¾ç‰‡æè¿°: æ•°æ®åˆ†æå›¾è¡¨ï¼Œæ˜¾ç¤ºå¸‚åœºè¶‹åŠ¿]


            æ­¤å¤–ï¼Œä¼˜åŒ–å•†å“è¯¦æƒ…é¡µæ˜¯æå‡è½¬åŒ–ç‡çš„å…³é”®ä¸€ç¯ã€‚é«˜è´¨é‡çš„å•†å“å›¾ç‰‡å’Œè¯¦å°½çš„æè¿°èƒ½æ˜¾è‘—æé«˜ä¹°å®¶ä¿¡ä»»åº¦ã€‚

            [å›¾ç‰‡URL: {{https://example.com/image2.jpg}}; å›¾ç‰‡æè¿°: ç²¾è‡´çš„ç”µå•†äº§å“å±•ç¤ºå›¾]

            â€™â€˜â€™


            ## è¾“å‡ºè¦æ±‚


            - æ–‡ç« å®Œæ•´æ€§ï¼š ä¿æŒåŸæ–‡ç« å†…å®¹çš„å®Œæ•´æ€§ï¼Œæ— éœ€å¯¹åŸæ–‡è¿›è¡Œä»»ä½•è°ƒæ•´æˆ–æ”¹å†™ï¼Œä»…éœ€åœ¨åˆé€‚çš„ä½ç½®æ’å…¥å›¾ç‰‡ã€‚

            - æœ€ç»ˆè¾“å‡ºï¼š ç›´æ¥è¾“å‡ºå›¾æ–‡ç»“åˆçš„å®Œæ•´æ–‡ç« ã€‚å¦‚æœå›¾ç‰‡ä¸å¯ç”¨ï¼Œåˆ™è¾“å‡ºæ–‡ç« å³å¯'
        - id: 10d7f24d-d622-49e4-be1e-ec3641156b4a
          role: user
          text: '1.æå–å›¾ç‰‡åˆ—è¡¨ï¼šä»{{#1752209765464.output#}}ä¸­æå–å›¾ç‰‡URLï¼Œå¦‚æœæœ‰å¤šä¸ªå°±æå–å¤šä¸ªå›¾ç‰‡URLï¼›

            2.æ–‡ç« å†…å®¹ï¼š{{#1752132727721.text#}}'
        selected: false
        title: å›¾ç‰‡å’Œæ–‡ç« ç»„åˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1752209794058'
      position:
        x: 1854
        y: 284
      positionAbsolute:
        x: 1854
        y: 284
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        author: Dify
        desc: ''
        height: 122
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"å…¥å‚ï¼š","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"1.Textï¼šå­—å¹•æ–‡æœ¬ï¼Œè¦é€‰æ‹©æ®µè½å‹","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"2.languageï¼šç”Ÿæˆæ–‡ç« çš„è¯­ç§","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"3.secret_keyï¼šè°ƒç”¨å³æ¢¦ç”Ÿæˆå›¾ç‰‡éœ€è¦","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"3.picturestyleï¼šé…å›¾è¦æ±‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"4.access_keyï¼šè°ƒç”¨å³æ¢¦ç”Ÿæˆå›¾ç‰‡éœ€è¦","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 319
      height: 122
      id: '1752211872470'
      position:
        x: 22.816818424149233
        y: 128.79456133063445
      positionAbsolute:
        x: 22.816818424149233
        y: 128.79456133063445
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 319
    - data:
        author: Dify
        desc: ''
        height: 123
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"è¯¥æµç¨‹å®ç°çš„èƒ½åŠ›ï¼š","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"1.é€šè¿‡è¾“å…¥å­—å¹•æ–‡æœ¬ä¿¡æ¯ï¼Œå°†å­—å¹•æ–‡æœ¬æå–ï¼Œæ’°å†™æˆå›¾æ–‡ç»“åˆçš„æ–‡ç« å±•ç¤ºã€‚æ–‡ç« å‹å¥½SEOã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"2.é€šè¿‡è¯¥æµç¨‹å®ç°æ‰¹é‡çš„æ–‡æœ¬å†…å®¹ç”Ÿæˆã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":"ltr","format":"","indent":0,"type":"root","version":1,"textFormat":1}}'
        theme: blue
        title: ''
        type: ''
        width: 379
      height: 123
      id: '1752211981139'
      position:
        x: 22.816818424149233
        y: -32.69472147705085
      positionAbsolute:
        x: 22.816818424149233
        y: -32.69472147705085
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 379
    - data:
        author: Dify
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"è°ƒç”¨å¤§æ¨¡å‹è¿›è¡Œæ–‡ç« æ”¹å†™","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 88
      id: '1752212122878'
      position:
        x: 631.4751804926188
        y: 145.1066100990876
      positionAbsolute:
        x: 631.4751804926188
        y: 145.1066100990876
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        author: Dify
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"æå–æ–‡ç« ä¸»é¢˜ç”Ÿæˆå³æ¢¦æç¤ºè¯","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 88
      id: '1752212149480'
      position:
        x: 949.3411884722835
        y: 151.63142960646886
      positionAbsolute:
        x: 949.3411884722835
        y: 151.63142960646886
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        author: Dify
        desc: ''
        height: 107
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"é€šè¿‡Pythonè¯·æ±‚å³æ¢¦æ¥å£ç”Ÿæˆå›¾ç‰‡","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"éœ€è¦åŸºäºDifyçš„Python
          åŸç”Ÿåº“æ”¹å†™ç«å±±çš„å³æ¢¦æ¥å£Pythonè¯·æ±‚ä»£ç ","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 276
      height: 107
      id: '1752212192562'
      position:
        x: 1260.982422259209
        y: 145.1066100990876
      positionAbsolute:
        x: 1260.982422259209
        y: 145.1066100990876
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 276
    - data:
        author: Dify
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"å¤§æ¨¡å‹ç†è§£ç”Ÿæˆçš„å›¾ç‰‡å’Œæ–‡ç« ï¼Œé‡æ–°å°†æ–‡ç« å’Œå›¾ç‰‡è¿›è¡Œç»„åˆ","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 88
      id: '1752212215096'
      position:
        x: 1854
        y: 151.63142960646886
      positionAbsolute:
        x: 1854
        y: 151.63142960646886
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        author: Dify
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ç”Ÿæˆå›¾æ–‡ç»“åˆçš„æ–‡ç« ","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 88
      id: '1752214240733'
      position:
        x: 2176.052987877692
        y: 152.86583865437322
      positionAbsolute:
        x: 2176.052987877692
        y: 152.86583865437322
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    viewport:
      x: -540.9255516902181
      y: 87.14461851239406
      zoom: 0.7218597697534653
